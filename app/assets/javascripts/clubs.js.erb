$(function(){
  $('button.accept').click(AcceptRequest);
  $('button.decline').click(DeclineRequest);
  HoldingsPie();
  OwnershipPie();
});

function AcceptRequest() {
  var id = this.id;
  var row = $(this).parent();
  $.ajax({
    type: 'PUT',
    url: ('/votes/' + id),
    data: { value: true },
    complete: function() {
      row.hide();
    }
  });
}

function DeclineRequest() {
  var id = this.id;
  var row = $(this).parent();
  $.ajax({
    type: 'PUT',
    url: ('/votes/' + id),
    data: { value: false },
    complete: function() {
      row.hide();
    }
  });
}

function HoldingsPie() {

var data = $('#holdings_view').data('holdings')
var jsonObj = $.parseJSON(data);

new Morris.Donut({
  element: 'holdings_view',
  data: jsonObj
});

}
